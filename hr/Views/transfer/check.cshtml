
@{
    Layout = null;
}
@using hrModel
@model hrModel.major_change
<!DOCTYPE html>

<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <link rel="stylesheet" href="../../css/table.css"
          type="text/css"></link>

    <script type="text/javascript" src="../../javascript/jquery-1.7.2.js"></script>
</head>
<body>
    <form method="post" action="check_success.html">
        <table width="100%">
            <tr>
                <td>
                    <font color="black">您正在做的业务是:人力资源--调动管理--调动审核</font>
                </td>
            </tr>
            <tr>
                <td align="right">
                    <input type="radio" name="check_status" value="2">通过
                    <input type="radio" name="check_status" value="1">不通过
                    <input type="button" value="确认" class="BUTTON_STYLE1" onclick="check()">
                    <input type="button" class="BUTTON_STYLE1" onclick="javascript:window.history.back();" value="返回">
                    <SCRIPT type="text/javascript">
                        function check() {
                            var rs = document.getElementsByName("majorChange.checkStatus");
                            if (rs[0].checked == false && rs[1].checked == false) {
                                alert("请选择通过或者不通过！");
                            } else {
                                function mySubmit() {
                                    if (document.getElementById("firstKindId").value == '0') {
                                        alert("请选择新一级结构！");
                                        return;
                                    }
                                    if (document.getElementById("newMajorKindId").value == '0') {
                                        alert("请选择新职位分类！");
                                        return;
                                    }
                                    if (document.getElementById("newMajorId").value == '0') {
                                        alert("请选择新职位名称！");
                                        return;
                                    }
                                    if (document.getElementById("newSalaryStandardId").value == '0') {
                                        alert("请选择新薪酬标准！");
                                        return;
                                    }

                                    document.forms[0].submit();

                                }
                                document.forms[0].submit();
                            }
                        }
                    </SCRIPT>
                </td>
            </tr>
        </table>
        <table width="100%" border="1" cellpadding=0 cellspacing=1
               bordercolorlight=#848284 bordercolordark=#eeeeee
               class="TABLE_STYLE1">
            <tr height="21">
                <td class="TD_STYLE1" width="8%">
                    档案编号
                </td>
                <td class="TD_STYLE2" width="10%">
                    <input type="text" name="human_id" readonly="readonly"
                           value="@Model.human_id" class="INPUT_STYLE2">

                </td>
                <td class="TD_STYLE1" width="8%">
                    姓名
                </td>
                <td class="TD_STYLE2" width="10%">
                    <input type="text" name="human_name"
                           value="@Model.human_name" readonly="readonly"
                           class="INPUT_STYLE2">
                </td>
                <td class="TD_STYLE1" width="8%"></td>
                <td class="TD_STYLE2" width="10%"></td>
                <td class="TD_STYLE1" width="8%"></td>
                <td class="TD_STYLE2" width="10%"></td>
            </tr>
            <tr>

                <td class="TD_STYLE1" width="8%">
                    原一级机构
                </td>
                <td class="TD_STYLE2">
                    <input type="text" name="first_kind_name"
                           value="@Model.first_kind_name" readonly="readonly"
                           class="INPUT_STYLE2">
                    <input type="hidden" name="first_kind_id" value="@Model.first_kind_id">
                </td>
                <td class="TD_STYLE1" width="8%">
                    原二级机构
                </td>
                <td class="TD_STYLE2" width="10%">
                    <input type="text" name="second_kind_name"
                           value="@Model.second_kind_name" readonly="readonly"
                           class="INPUT_STYLE2">
                    <input type="hidden" name="second_kind_id" value="@Model.second_kind_id">
                </td>
                <td class="TD_STYLE1" width="8%">
                    原三级机构
                </td>
                <td class="TD_STYLE2" width="10%">
                    <input type="text" name="third_kind_name"
                           value="@Model.third_kind_name" readonly="readonly"
                           class="INPUT_STYLE2">
                    <input type="hidden" name="third_kind_id" value="@Model.third_kind_id">
                </td>
                <td class="TD_STYLE1" width="8%"></td>
                <td class="TD_STYLE2" width="10%"></td>
            </tr>

            <tr>
                <td class="TD_STYLE1">
                    原职位分类
                </td>
                <td class="TD_STYLE2">
                    <input type="text" name="major_kind_name"
                           value="@Model.major_kind_name" readonly="readonly" class="INPUT_STYLE2">
                    <input type="hidden" name="major_kind_id" value="@Model.major_kind_id">
                </td>
                <td class="TD_STYLE1" width="12%">
                    原职位名称
                </td>
                <td class="TD_STYLE2">
                    <input type="text" name="major_name"
                           value="@Model.major_name" readonly="readonly"
                           class="INPUT_STYLE2">
                    <input type="hidden" name="major_id" value="@Model.major_id">
                </td>
                <td class="TD_STYLE1">
                    原薪酬标准
                </td>
                <td class="TD_STYLE2">
                    <input type="text" name="salary_standard_name"
                           value="@Model.salary_standard_name"
                           readonly="readonly" class="INPUT_STYLE2">
                    <input type="hidden" name="salary_standard_id" value="@Model.salary_standard_id">
                </td>
                <td class="TD_STYLE1">
                    原薪酬总额
                </td>
                <td class="TD_STYLE2">
                    <input type="text" name="salary_sum"
                           value="@Model.salary_sum" readonly="readonly"
                           class="INPUT_STYLE2">
                </td>
            </tr>
            <tr>
                <td class="TD_STYLE1">
                    新一级机构名称
                </td>
                <td class="TD_STYLE2">
                    <script type="text/javascript">
                        $(function () {
                            var first = $("#firstKindId");
                            var second = $("#secondKindId");
                            var third = $("#thirdKindId");
                            second.change(function () {
                                $("#newsecondKindName").val() = second.find("option:selected").text();
                            })
                            third.change(function () {
                                $("#newThirdKindName").val() = third.find("option:selected").text();
                            })
                            first.change(function () {
                                $("#newFirstKindName").val(first.find("option:selected").text());
                                second.html("");
                                $.ajax({
                                    url: "../er",
                                    data: "id=" + first.val(),
                                    success: function (data) {
                                        second.append("<option value='0' >-----请选择-----</option>");
                                        for (var i = 0; i < data.length; i++) {
                                            second.append("<option value='" + data[i].second_kind_id + "'>" + data[i].second_kind_name + "</option>");
                                        }
                                    }
                                })
                                third.val('0');
                            });
                        });
                    </script>

                    <select style="width:160px" name="new_first_kind_id" id="firstKindId" size="1" class="SELECT_STYLE2">
                        <option value="0">-----请选择-----</option>
                        @foreach (var item in ViewData["yi"] as List<config_file_first_kind>)
                        {
                            <option value="@item.first_kind_id">@item.first_kind_name</option>
                        }
                    </select>
                    <input type="hidden" name="new_first_kind_name" id="newFirstKindName">
                </td>
                <td class="TD_STYLE1" width="12%">
                    新二级机构名称
                </td>
                <td class="TD_STYLE2">
                    <script type="text/javascript">
                        $(function () {

                            var first = $("#firstKindId");
                            var second = $("#secondKindId");
                            var third = $("#thirdKindId");

                            second.change(function () {
                                third.html("");
                                $.ajax({
                                    url: "../san",
                                    data: "id=" + second.val(),
                                    success: function (data) {
                                        third.append("<option value='0' >-----请选择-----</option>");
                                        for (var i = 0; i < data.length; i++) {
                                            third.append("<option value='" + data[i].third_kind_id + "'>" + data[i].third_kind_name + "</option>");
                                        }
                                        //alert(data);
                                    }
                                })

                            });

                        });
                    </script>
                    <select style="width:160px" name="new_second_kind_id" id="secondKindId" size="1" class="SELECT_STYLE2">
                        <option value="0">-----请选择-----</option>

                    </select>
                    <input type="hidden" name="new_second_kind_name" id="newsecondKindName">
                </td>
                <td class="TD_STYLE1" width="12%">
                    新三级机构名称
                </td>
                <td class="TD_STYLE2">
                    <select style="width:160px" name="new_third_kind_id" id="thirdKindId" size="1" class="SELECT_STYLE2">
                        <option value="0">-----请选择-----</option>
                    </select>
                    <input type="hidden" name="new_third_kind_name" id="newThirdKindName">
                </td>
                <td class="TD_STYLE1" width="8%"></td>
                <td class="TD_STYLE2" width="10%"></td>
            </tr>
            <tr>
                <td class="TD_STYLE1">
                    新职位分类
                </td>
                <td class="TD_STYLE2">
                    <select style="width:160px" name="new_major_kind_id" id="newMajorKindId" size="1" class="SELECT_STYLE2">
                        <option value="0">-----请选择-----</option>
                        @foreach (var item in ViewData["zw"] as List<config_major>)
                        {
                            <option value="@item.major_kind_id">@item.major_kind_name</option>
                        }
                    </select>
                    <input type="hidden" name="new_major_kind_name" id="newMajorKindName">
                    <script type="text/javascript">

                        $(function () {
                            
                            var second = $('#newMajorKindId');
                            var third = $('#newMajorId');
                            second.change(function () {
                                $("#newMajorKindName").val($('#newMajorKindId option:selected').html());
                                third.html("");
                                $.ajax({
                                    url: "../zw",
                                    data: "id=" + second.val(),
                                    success: function (data) {
                                        third.append("<option value='0' >-----请选择-----</option>");
                                        for (var i = 0; i < data.length; i++) {
                                            third.append("<option value='" + data[i].major_id + "'>" + data[i].major_name + "</option>");
                                        }
                                    }
                                })
                                
                            });
                        });
                    </script>
                </td>
                <td class="TD_STYLE1" width="12%">
                    新职位名称
                </td>
                <td class="TD_STYLE2">
                    <select name="new_major_id" id="newMajorId" class="INPUT_STYLE2">
                        <option value="0">-----请选择-----</option>
                        <option value="1">董事长</option>
                        <option value="2">经理</option>
                    </select>
                    <input type="hidden" name="majorChange.newMajorName" id="newMajorName">
                </td>
                <td class="TD_STYLE1">
                    新薪酬标准
                </td>
                <td class="TD_STYLE2">
                    <select style="width:160px" name="new_salary_standard_id" id="newSalaryStandardId" size="1" class="SELECT_STYLE2">
                        <option value="0">-----请选择-----</option>
                        @foreach (var item in ViewData["xc"] as List<salary_standard>)
                        {
                            <option value="@item.ssd_id">@item.standard_name</option>
                        }
                        
                        <option value="1353320112255">董事长</option>

                    </select>
                    <input type="hidden" name="new_salary_standard_name" id="newSalaryStandardName">
                    <SCRIPT type="text/javascript">

                        $(function () {
                            var standardid = $('#newSalaryStandardId');
                            var standardname = $('#newSalaryStandardName');
                            var newSalarySum = $('#newSalarySum');
                            standardid.change(function () {
                                $.ajax({
                                    url: "../xc",
                                    data: "id=" + standardid.val(),
                                    success: function (data) {
                                        newSalarySum.val(data);
                                    }
                                })
                            });
                        });
                    </SCRIPT>
                </td>
                <td class="TD_STYLE1">
                    新薪酬总额
                </td>
                <td class="TD_STYLE2">
                    <input type="text" name="new_salary_sum" id="newSalarySum" readonly="readonly"
                           value="@Model.salary_sum" class="INPUT_STYLE2">
                </td>
            </tr>

            <tr>
                <td class="TD_STYLE1">
                    登记人
                </td>
                <td class="TD_STYLE2">
                    <input type="text" name="register" readonly="readonly" value="@Model.register"
                           class="INPUT_STYLE2">
                </td>
                <td class="TD_STYLE1">
                    登记时间
                </td>
                <td class="TD_STYLE2">
                    <input type="text" name="regist_time" readonly="readonly" value="@Model.regist_time" class="INPUT_STYLE2">
                </td>
                <td class="TD_STYLE1">
                    复核人
                </td>
                <td class="TD_STYLE2">
                    <input type="text" name="checker" readonly="readonly" value="better_admin" class="INPUT_STYLE2">
                </td>
                <td class="TD_STYLE1">
                    复核时间
                </td>
                <td class="TD_STYLE2">
                    <input type="text" name="check_time" id="Tdate" class="INPUT_STYLE2">
                </td>
            </tr>
            <tr>
                <td class="TD_STYLE1">
                    调动原因
                </td>
                <td colspan="7" class="TD_STYLE2">
                    <textarea name="change_reason" rows="6" readonly="readonly" class="TEXTAREA_STYLE1">@Model.change_reason</textarea>
                </td>
            </tr>
            <tr>
                <td class="TD_STYLE1">
                    复合通过意见
                </td>
                <td colspan="7" class="TD_STYLE2">
                    <textarea name="check_reason" rows="6" class="TEXTAREA_STYLE1"></textarea>
                </td>
            </tr>

            <SCRIPT type="text/javascript">
                function time() {
                    var tdate = document.getElementById("Tdate");
                    var d = new Date();
                    var y = d.getFullYear();
                    var moth = d.getMonth() + 1;
                    var date = d.getDate();
                    var h = d.getHours();
                    var m = d.getMinutes();
                    var s = d.getSeconds();
                    var hh = 20 - 1 - h;
                    var mm = 60 - 1 - m;
                    var ss = 60 - s;
                    if (hh > 0) {
                        mm = mm + 60 * hh;
                    }
                    if (moth < 10) {
                        moth = "0" + moth;
                    }
                    if (date < 10) {
                        date = "0" + date;
                    }
                    if (h < 10) {
                        h = "0" + h;
                    }
                    if (m < 10) {
                        m = "0" + m;
                    }
                    if (s < 10) {
                        s = "0" + s;
                    }
                    if (mm < 10) {
                        mm = "0" + mm;
                    }
                    if (ss < 10) {
                        ss = "0" + ss;
                    }

                    tdate.value = y + "-" + moth + "-" + date + " " + h + ":" + m + ":" + s;

                }
                function load() {

                   
                    time();
                }
                window.onload = load;
                var out = window.setInterval(time, 1000);

            </SCRIPT>
        </table>
    </form>
</body>
</html>
